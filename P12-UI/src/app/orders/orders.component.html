

<div class="text-center">
  <h3>Mes commandes</h3>
</div>

<!-- ------PHILTRE------- -->
<form #f="ngForm" (ngSubmit)="onSearchByPhiltre(f.value)">
  <div class="form-row">
    <div class="form-group col-md-4">
      <label for="inputState">Size</label>
      <select id="inputState" class="form-control" name="size" [ngModel]="size">
        <option *ngFor="let s of listSize" [ngValue]="s" [selected]="size == s">{{s}}</option>
      </select>
    </div>
  </div>
  <button type="submit" class="btn btn-primary">Search</button>
</form>

<div *ngIf="orders">
  <div class="table-responsive my-3">
    <table class="table">
      <thead>
      <tr>
        <th>Référence</th>
        <th>Date de la commande</th>
        <th>Réception de la commande</th>
        <th>Prix total</th>
        <th></th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let order of orders.content">
        <td>{{order.reference}}</td>
        <td>{{order.date| date: 'dd/MM/yyyy'}}</td>
        <td>{{order.reception| date: 'dd/MM/yyyy'}}</td>
        <td>{{order.totalPrice | number:'0.2'}}</td>
        <td><button [routerLink]="['/order', order.id]" class="btn btn-info">Détails</button></td>
      </tr>
      </tbody>
    </table>
  </div>

  <!-- ------PAGINATION------- -->

  <div *ngIf="orders.totalPages > 1">
    <ul class="pagination justify-content-center">

      <li class="page-item"
          [ngClass]="orders.number == 0 ? 'disabled' : ''"><a
        class="page-link cliquable"
        (click)="getOrders(0, size)">«</a></li>

      <li class="page-item"
          [ngClass]="orders.number == 0 ? 'disabled' : ''"><a
        class="page-link cliquable"
        (click)="getOrders(orders.number - 1, size)">←</a></li>

      <li class="page-item" *ngFor="let item of [].constructor(orders.totalPages); let i = index"
          [ngClass]="orders.number == i ? 'active' : ''">
        <a class="page-link cliquable"
           (click)="getOrders( i, size)">{{i + 1}}</a>
      </li>

      <li class="page-item"
          [ngClass]="orders.number + 1 == orders.totalPages ? 'disabled' : ''">
        <a class="page-link cliquable"
           (click)="getOrders(orders.number + 1, size)">→</a>
      </li>

      <li class="page-item"
          [ngClass]="orders.number + 1 == orders.totalPages ? 'disabled' : ''">
        <a class="page-link cliquable"
           (click)="getOrders(orders.totalPages - 1, size)">»</a>
      </li>
    </ul>
  </div>
</div>


<div *ngIf="!orders">
  <div *ngIf="orders !== undefined" class="spinner-border" style="width: 3rem; height: 3rem;" role="status">
    <span class="sr-only">Loading...</span>
  </div>
  <div *ngIf="orders === undefined" class="justify-content-center row mt-5 font-weight-bold">
    <p>Vous n'avez aucune commande !</p>
  </div>

  <router-outlet></router-outlet>

</div>
